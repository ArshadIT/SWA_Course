<html>

<head>
    <script type="module">
        import { of, Observable } from 'https://dev.jspm.io/rxjs@6/_esm2015';
        import { delay, tap, mergeMap, repeat, map, filter} from 'https://dev.jspm.io/rxjs@6/_esm2015/operators';

        window.load = () => {

            let url = 'http://localhost:8080/warnings'

            const display = response => {
                document.open();
                document.write(response.time);
            };

            const poll = of({}).pipe(
                mergeMap(_ => fetch(url).then(res => { return res.json(); })),
                tap(display),
                delay(3000),
                repeat()
            );

            poll.subscribe();

        }
    </script>
</head>

<body onload="load()">
    <button onclick="poll.unsubscribe();"></button>
</body>

</html>